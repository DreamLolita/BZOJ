看上去一道很最短路的题目，如果暴力建图，边数是nm的会炸。
我们要优化建图，观察到对于一只狗能跳到的位置%pi是一定的，所以考虑按模分组。
但是直接分组显然也是不行的，回想暴力，发现当pi>sprt(n)的时候，我们暴力连，只有sqrt(n)跳边。
所以我们只需要对pi<=sqrt(n)进行分组，那么对于每一座楼，我们可以建sqrt(n)个点，
其中第i个点表示能往左右跳pi，即向左右距离为pi的同层楼连边。
这样建图，点数和边数都是n*sqrt(n)的了，直接最短路就能过。