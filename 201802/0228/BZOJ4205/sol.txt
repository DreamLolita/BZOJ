如果我们直接暴力建图，就算是dinic这种能过百万的方法怕也因为边太多滚粗了。
我们采用将边分类的方法优化。考虑$a$项属性值能被$x$整除且$b$项能力值能被$y$整除的所有点，只要是在两侧一定能够匹配，所以我们在匹配的网络流模型中间增加一排这样的点，满足要求的左右点分别与它相连，边权为正无穷。
因为$x$和$y$只需是质数，这样的点不会很多，大概7000个，而两侧每个点至多连出9条边，最后的图是70000个点，200000条边左右。但这样建图依然是分层图，这下用dinic就可以过了。