枚举长度$len$，那么$len$必须要是$n$的约数，然后枚举每个长度为$len$的子串$S$，检查是否可行。
对于检查，设$f[i,j]$表示区间$[i,j]$能否通过$S$产生，转移则是要么在末尾产生某个长度为$len$倍数的区间，要么接着匹配一位（即$S_{(j-i) mod|S|}$）。
区间dp，时间复杂度$O(\frac {n^3} {len})$。 总时间复杂度 $O(n^3d(n)logn)$