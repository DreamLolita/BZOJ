对于每个点，如果它到根的状态是确定的，那么它的左右子树的答案是独立的。
那么我们考虑dfs来状压，如果当前搜到的是叶子节点，我们可以$O(n)$扫一遍得答案，否则直接更新。