首先显然对于连续一段排序的代价就是这段逆序对的个数，然后我们可以dp，设$f_{i,j}表示将$[1,i]$分成$j$个连续段的最小代价即可。
这个dp显然又满足决策单调性，那么具有决策单调性的dp，可以直接平行四边形优化来做，当然我们很常见的还是分治求解。
用BIT维护一下区间逆序对个数即可。
~~你还可以选择用可持久化分块来达到更优的时间复杂度~~


