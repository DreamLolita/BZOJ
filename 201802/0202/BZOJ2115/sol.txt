考虑答案形式一定是一条路径+若干环。我们先求出1~n的任意一条路径。
此时我们会发现，1~n的其他路径可以通过这个路径异或某些环得到。这个东西在QBXT也讲过。
问题转化为有一个数和一个数集，使得这个数异或数集里的一些数后值最大，线性基做即可。
