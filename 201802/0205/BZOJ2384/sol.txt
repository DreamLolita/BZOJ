序列满足条件可以由每个数前面比它小的数的个数判定。这个东西可以用KMP来做。
考虑KMP求$next$数组的过程：当满足条件时从前一个递推到后一个。那么可以使用树状数组维护比一个数小的数的个数，
当当前小于该数的数的个数不等于应有的个数时就减少长度，并暴力将减掉的数从树状数组中删除。
由于每次$next$减少对应的是前面的$next$的增加，而$next$每次只增加1，因此对于每个字符的均摊时间复杂度是$O(logm)$的。之后匹配类似。

其实修改一下KMP中判断相等的条件，这题可以做到线性时间内出解。
我们维护每个数前面所有比它小的数中，最大的数的位置（即刚好比它小的数的位置），和刚好比它大的数的位置。
然后只要S中的对应位置也满足对应的关系，就认为是相等。

