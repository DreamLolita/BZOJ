如果一个区间包含另一个区间，那么这两个区间是否在一起的生产率是一样的。
将所有这种包含了其他区间的区间放入数组$b$，其余的放入数组$c$，有多个相同的时候则从$b$移一个到$c$。
那么$c$里所有区间左端点递增，右端点也递增，设$f[i][j]$为$c$中前$i$个区间划分成$j$组的最大收益，直接DP即可，决策具有单调性。
然后把$p$分配给$b$和$c$，求出$b$和$c$组合取来的最大收益即可。