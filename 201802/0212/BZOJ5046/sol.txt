首先有一个很显然的结论：这个游戏不关心能量的多少，只关心能量的差值。
然后观察到题目中特意强调了美味值和不大，考虑用这个dp。设$s[i]$表示$i$到$n$这些糖果美味度的总和。 
令$f[i][j]$表示考虑$i$到$n$这些糖果形成的子游戏，先手希望拿到至少$j$点美味度时，先手与后手的能量差值最少是多少。
若先手决定拿走第$i$个糖果，那么后手能拿走的美味度总和不超过$s[i]-j$，即要保证后手拿不到$s[i]-j+1$，故$f[i][j]=-f[i+1][s[i]-j+1]-r[i]+1$。 
若先手决定让后手拿第$i$个糖果，那么至少比后手多1点能量，且可以在未来拿到$j$点美 味度，故$f[i][j]=max(1,f[i+1][j]+r[i]+1)$。 
最后先手的总美味度即为最大的$k$，满足$f[1][k] \geq A-B$。 