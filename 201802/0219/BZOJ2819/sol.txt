树链查询可以变成对某些点到根的查询的叠加，这样就只需要解决查询从根发出的树链即可。
如果我们询问的是从根到$X$节点树链上的值，那么只有$X$节点或$X$节点的祖先可能影响到$X$节点的答案。
也就是说，一个点修改以后，只会影响它为根的子树内的节点。
这样我们把这个节点所在的子树区间$[l,r]$修改一下即可。
查询的时候，如果查询的是$X$点，那么返回X节点所在DFS序中的那个位置的数即可。
这样我们可以用线段树就行了，BIT之类的数据结构也是可以的。