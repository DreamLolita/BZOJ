如果我们枚举放几个零件的话，第二个限制很容易解决，但是第一个怎么办？(好的，这么建图不可做)
考虑我们枚举每行每列最多放几个零件t，然后计算零件总数sum。这样如果可行的话，则有t*B<=sum*A。
考虑第一个限制怎么办。我们可以钦定所有可行的位置都放上零件，然后再把多的零件拆下来。
我们令sxi为第i行能放的最多零件数，syi为第i列能放的最多零件数。
由源点向每一行连流量sxi费用0的边，每一列向汇点连流量syi费用0的边。
然后让每一行i向每一列i连流量t费用0的边，表示第i行和第j列最多同时不拆(留下)t个零件。
最后对于所有输入为'.'的格子ij，由第i行向第j列连容量1费用1的边，表示拆下第i行第j列的零件。
跑费用流，必须满流才满足题意(零件要么行和列同时留下，要么拆掉)，费用表示拆掉的零件个数。
然后用留下的零件个数和t去比较是否合法，计算答案就行了。
感觉这题就是给了我们一种网络流建图，补集转化的姿势(如果选择的流量行列不移动统一，那么去掉的流量是否统一？如果选择的不好限制，去掉的是否容易限制？)