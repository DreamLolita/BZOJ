看题目，求的是收益/代价，那么应该就是一道01分数规划了。
对于分数规划，我们要落实到每一步决策上，所以我们重建一个$n^2$条边的图，图中的每一边都代表一个决策
我们可以用$n^2*k$，处理出这$n^2$个决策，对于点$i$到点$j$，决策肯定是买卖最赚钱的那个物品，然后走$i-j$的最短路，所以每个决策的收益和代价就求出来了；
那么二分答案$mid$，从$i$到$j$连$（收益-长度*mid）$的边，（如果i能到j的话），然后用SPFA判正环即可。