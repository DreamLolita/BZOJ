首先$B$的顺序没什么关系，就从小到大排个序，那么$A$中每个元素能匹配的就是$B$的一个后缀。
根据霍尔定理，排序后对于每个$B_i$，如果它最少能匹配$i$个元素，则可以完美匹配。
那么用线段树维护一下$min(匹配i-i)$就行了。
