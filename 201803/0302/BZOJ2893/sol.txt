首先对于有向图我们缩个环，得到一个DAG。
考虑用费用流的特性解决这道题，我们可以这样建边（以下$(c,w)$表示流量为$c$，费用为$w$）：
将每个点$u$拆点，对于$u->u'$，建立两条边$(1,1)和(INF,0)$，这样可以保证每个点可以经过多次。
对于$S->u和u'->T$，建边$(INF,0)$，对于DAG中的每条边$(u,v)$，建立边$u'->v(INF,0)$。
那么最大费用流每次会尽量走费用多的边,即走尽量多的点,正确性由网络流保证，增广的次数就是答案。
